{% extends 'newsapp/base.html' %}  <!-- –ò–∑–º–µ–Ω–µ–Ω –ø—É—Ç—å -->
{% load i18n %}

{% block title %}{% trans "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π" %}{% endblock %}

{% block content %}
<div class="container">
    <div class="preferences-header">
        <h2>{% trans "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π" %}</h2>
        <p>{% trans "–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –≤–∞—à–µ–º—É –≤–∫—É—Å—É" %}</p>
    </div>

    <form method="post" class="preferences-form">
        {% csrf_token %}

        <div class="form-section">
            <h3>{% trans "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π" %}</h3>
            <div class="categories-grid">
                {% for choice in form.categories %}
                <label class="category-checkbox">
                    {{ choice.tag }}
                    <span class="checkmark"></span>
                    {{ choice.choice_label }}
                </label>
                {% endfor %}
            </div>
        </div>

        <div class="form-section">
            <h3>{% trans "–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è" %}</h3>
            <div class="theme-options">
                {% for choice in form.theme %}
                <label class="theme-option">
                    {{ choice.tag }}
                    <div class="theme-preview {{ choice.choice_value }}-preview">
                        <span class="theme-name">
                            {% if choice.choice_value == 'light' %}
                                {% trans "–°–≤–µ—Ç–ª–∞—è" %}
                            {% else %}
                                {% trans "–¢–µ–º–Ω–∞—è" %}
                            {% endif %}
                        </span>
                    </div>
                </label>
                {% endfor %}
            </div>
        </div>

        <div class="form-section">
            <h3>{% trans "–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞" %}</h3>
            <div class="language-options">
                {% for choice in form.language %}
                <label class="language-option">
                    {{ choice.tag }}
                    <span class="language-name">
                        {% if choice.choice_value == 'ru' %}
                            üá∑üá∫ {% trans "–†—É—Å—Å–∫–∏–π" %}
                        {% else %}
                            üá∫üá∏ English
                        {% endif %}
                    </span>
                </label>
                {% endfor %}
            </div>
        </div>

        <div class="form-section">
            <h3>{% trans "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" %}</h3>
            <div class="additional-settings">
                <label class="checkbox-setting">
                    {{ form.email_notifications }}
                    <span class="setting-label">{% trans "Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö" %}</span>
                </label>

                <div class="number-setting">
                    <label for="{{ form.news_per_page.id_for_label }}">
                        {% trans "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ" %}:
                    </label>
                    {{ form.news_per_page }}
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-primary">{% trans "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" %}</button>
            <a href="{% url 'index' %}" class="btn-secondary">{% trans "–û—Ç–º–µ–Ω–∞" %}</a>
        </div>
    </form>

    <div class="current-preferences">
        <h3>{% trans "–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" %}</h3>
        <div class="preferences-summary">
            <p><strong>{% trans "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏" %}:</strong> {{ preferences.categories|join:", " }}</p>
            <p><strong>{% trans "–¢–µ–º–∞" %}:</strong>
                {% if preferences.theme == 'light' %}
                    {% trans "–°–≤–µ—Ç–ª–∞—è" %}
                {% else %}
                    {% trans "–¢–µ–º–Ω–∞—è" %}
                {% endif %}
            </p>
            <p><strong>{% trans "–Ø–∑—ã–∫" %}:</strong>
                {% if preferences.language == 'ru' %}
                    {% trans "–†—É—Å—Å–∫–∏–π" %}
                {% else %}
                    English
                {% endif %}
            </p>
            <p><strong>{% trans "Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" %}:</strong>
                {{ preferences.email_notifications|yesno:_("–í–∫–ª—é—á–µ–Ω—ã,–í—ã–∫–ª—é—á–µ–Ω—ã") }}
            </p>
            <p><strong>{% trans "–ù–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ" %}:</strong> {{ preferences.news_per_page }}</p>
        </div>
    </div>
</div>
{% endblock %}